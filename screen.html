<!doctype html>
<html>
  <head>
    <title>Shared Screen</title>
  </head>

  <!-- CSS -->
  <link rel="stylesheet" type="text/css" href="../css/screen.css">
  <link rel="stylesheet" type="text/css" href="../css/game.css">

  <!-- JS -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js"></script>
  <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
  <script src="js/Game.js"></script>

  <script>

    $(document).ready(function(){

      var socket = io();
      var game = new Game();

      //Let Socket know this is the shared screen client
      socket.emit('register', {'usertype':'client_shared_screen'} );

      socket.on('add-player', function(data){

        $('#messages').append($('<li>').html('<span style="color:'+data.usercolor+';">'+ data.nickname+'</span> has joined.'));
        game.addPlayer(data);

      });

      socket.on('remove-player', function(data){

        $('#messages').append($('<li>').html('<span style="color:'+data.usercolor+';">'+ data.nickname+'</span> has exited.'));
        game.removePlayer(data);

      });

      socket.on('control-vector', function(data){
        game.controlVector(data);
      });

      socket.on('control-tap', function(data){
        game.controlTap(data);
      });


      //Set game bounds on load/resize
      $(window).bind("load resize", function() {

        var w = (this.window.innerWidth > 0) ? this.window.innerWidth : this.screen.width;
        var h = (this.window.innerHeight > 0) ? this.window.innerHeight : this.screen.height;
        game.setBounds(0,0,w,h);

      });

      game.init($('#stage'));

    });

  </script>

  <body>
    <ul id="messages"></ul>
    <div id='stage'></div>
    <h2 id="game-countdown"></h2>
    <div id="new-round">
      <img src="../img/new-round-screen.png"/>
      <h2 id="round-countdown">XX</h2>
      <ul id="player-list">
        <li>No players have joined</li>
      </ul>
    </div>
  </body>

</html>